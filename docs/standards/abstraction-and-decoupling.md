# 抽象与解耦原则（平台准则）

> 目的：稳定“平台内功”。功能可增可减，但边界与契约必须稳定。

## 1. 能力定义与执行解耦
- **能力定义**仅描述：输入 schema、默认参数、metadata。
- **执行节点**仅描述：baseUrl、并发、凭证、健康状态。
- 能力不硬编码服务器地址；执行节点可随时替换。

## 2. 能力执行与展示解耦
- 执行结果统一落 OSS，再由前端展示。
- 前端只消费 `storedUrl`/OSS URL，不依赖上游链接。

## 3. 评测链路与生产链路解耦
- 评测使用 Coze workflow 作为“验证工具”，不直接替代生产能力。
- 评测结果不影响生产任务状态，只用于验证和回归。

## 4. 参数契约先行
- 图片输入统一 `url`（字符串）。
- 数值参数统一“纯数字”，禁止带 `px`。
- 枚举值必须明确 options（业务方禁止传 label）。

## 5. 回调/异步一致性
- 异步能力必须返回可查询 `taskId`。
- `taskId` 可解析，便于定位 executor 与排障。

## 6. 媒资落盘统一入口
- 任何外部图片/视频都先入 OSS。
- 对外只暴露自有 URL，避免外链过期。

## 7. 文档与实现同步
- **及时更新文档是硬性准则**：需求/实现/参数调整必须当日同步到对应文档与索引。
- 变更参数必须同步评测文档、Coze 工具箱、业务文档。
- 每次上线必须有“测试记录 + 回顾记录”。
